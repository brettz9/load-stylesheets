{"version":3,"file":"index-es.min.js","sources":["../src/index.js"],"sourcesContent":["export default function loadStylesheets (stylesheets, {\n  before: beforeDefault, after: afterDefault, favicon: faviconDefault,\n  canvas: canvasDefault, image: imageDefault = true,\n  acceptErrors\n} = {}) {\n  stylesheets = Array.isArray(stylesheets) ? stylesheets : [stylesheets];\n\n  function setupLink (stylesheetURL) {\n    let options = {};\n    if (Array.isArray(stylesheetURL)) {\n      ([stylesheetURL, options = {}] = stylesheetURL);\n    }\n    let {favicon = faviconDefault} = options;\n    const {\n      before = beforeDefault,\n      after = afterDefault,\n      canvas = canvasDefault,\n      image = imageDefault\n    } = options;\n    function addLink () {\n      if (before) {\n        before.before(link);\n      } else if (after) {\n        after.after(link);\n      } else {\n        document.head.appendChild(link);\n      }\n    }\n\n    const link = document.createElement('link');\n\n    // eslint-disable-next-line promise/avoid-new -- No native option\n    return new Promise((resolve, reject) => {\n      let rej = reject;\n      if (acceptErrors) {\n        rej = typeof acceptErrors === 'function'\n          ? (error) => {\n            acceptErrors({\n              error, stylesheetURL, options, resolve, reject\n            });\n          }\n          : resolve;\n      }\n      if (stylesheetURL.endsWith('.css')) {\n        favicon = false;\n      } else if (stylesheetURL.endsWith('.ico')) {\n        favicon = true;\n      }\n      if (favicon) {\n        link.rel = 'shortcut icon';\n        link.type = 'image/x-icon';\n\n        if (image === false) {\n          link.href = stylesheetURL;\n          addLink();\n          resolve(link);\n          return;\n        }\n\n        const cnv = document.createElement('canvas');\n        cnv.width = 16;\n        cnv.height = 16;\n        const context = cnv.getContext('2d');\n        const img = document.createElement('img');\n        // eslint-disable-next-line promise/prefer-await-to-callbacks -- No API\n        img.addEventListener('error', (error) => {\n          reject(error);\n        });\n        img.addEventListener('load', () => {\n          context.drawImage(img, 0, 0);\n          link.href = canvas\n            ? cnv.toDataURL('image/x-icon')\n            : stylesheetURL;\n          addLink();\n          resolve(link);\n        });\n        img.src = stylesheetURL;\n        return;\n      }\n      link.rel = 'stylesheet';\n      link.type = 'text/css';\n      link.href = stylesheetURL;\n      addLink();\n      // eslint-disable-next-line promise/prefer-await-to-callbacks -- No API\n      link.addEventListener('error', (error) => {\n        rej(error);\n      });\n      link.addEventListener('load', () => {\n        resolve(link);\n      });\n    });\n  }\n\n  return Promise.all(\n    stylesheets.map((stylesheetURL) => setupLink(stylesheetURL))\n  );\n}\n"],"names":["loadStylesheets","stylesheets","beforeDefault","before","afterDefault","after","faviconDefault","favicon","canvasDefault","canvas","image","imageDefault","acceptErrors","setupLink","stylesheetURL","options","Array","isArray","addLink","link","document","head","appendChild","createElement","Promise","resolve","reject","rej","error","endsWith","rel","type","href","cnv","width","height","context","getContext","img","addEventListener","drawImage","toDataURL","src","all","map"],"mappings":"u8BAAe,SAASA,EAAiBC,gEAIrC,GAHMC,IAARC,OAA8BC,IAAPC,MAA8BC,IAATC,QACpCC,IAARC,WAAuBC,MAAOC,gBAC9BC,IAAAA,sBAISC,EAAWC,OACdC,EAAU,MACVC,MAAMC,QAAQH,GAAgB,SACCA,KAA/BA,kBAAeC,aAAU,WAEIA,EAA5BR,QAAAA,aAAUD,MAMXS,MAJFZ,OAAAA,aAASD,QACTG,MAAAA,aAAQD,QACRK,OAAAA,aAASD,QACTE,MAAAA,aAAQC,aAEDO,IACHf,EACFA,EAAOA,OAAOgB,GACLd,EACTA,EAAMA,MAAMc,GAEZC,SAASC,KAAKC,YAAYH,OAIxBA,EAAOC,SAASG,cAAc,eAG7B,IAAIC,SAAQ,SAACC,EAASC,OACvBC,EAAMD,KACNd,IACFe,EAA8B,mBAAjBf,EACT,SAACgB,GACDhB,EAAa,CACXgB,MAAAA,EAAOd,cAAAA,EAAeC,QAAAA,EAASU,QAAAA,EAASC,OAAAA,KAG1CD,GAEFX,EAAce,SAAS,QACzBtB,GAAU,EACDO,EAAce,SAAS,UAChCtB,GAAU,GAERA,EAAS,IACXY,EAAKW,IAAM,gBACXX,EAAKY,KAAO,gBAEE,IAAVrB,SACFS,EAAKa,KAAOlB,EACZI,SACAO,EAAQN,OAIJc,EAAMb,SAASG,cAAc,UACnCU,EAAIC,MAAQ,GACZD,EAAIE,OAAS,OACPC,EAAUH,EAAII,WAAW,MACzBC,EAAMlB,SAASG,cAAc,cAEnCe,EAAIC,iBAAiB,SAAS,SAACX,GAC7BF,EAAOE,MAETU,EAAIC,iBAAiB,QAAQ,WAC3BH,EAAQI,UAAUF,EAAK,EAAG,GAC1BnB,EAAKa,KAAOvB,EACRwB,EAAIQ,UAAU,gBACd3B,EACJI,IACAO,EAAQN,WAEVmB,EAAII,IAAM5B,GAGZK,EAAKW,IAAM,aACXX,EAAKY,KAAO,WACZZ,EAAKa,KAAOlB,EACZI,IAEAC,EAAKoB,iBAAiB,SAAS,SAACX,GAC9BD,EAAIC,MAENT,EAAKoB,iBAAiB,QAAQ,WAC5Bd,EAAQN,gBAnFdlB,EAAce,MAAMC,QAAQhB,GAAeA,EAAc,CAACA,GAwFnDuB,QAAQmB,IACb1C,EAAY2C,KAAI,SAAC9B,UAAkBD,EAAUC"}