{"version":3,"file":"index-umd.min.js","sources":["../src/index.js"],"sourcesContent":["export default function loadStylesheets (stylesheets, {\n  before: beforeDefault, after: afterDefault, favicon: faviconDefault,\n  canvas: canvasDefault, image: imageDefault = true,\n  acceptErrors\n} = {}) {\n  stylesheets = Array.isArray(stylesheets) ? stylesheets : [stylesheets];\n\n  function setupLink (stylesheetURL) {\n    let options = {};\n    if (Array.isArray(stylesheetURL)) {\n      ([stylesheetURL, options = {}] = stylesheetURL);\n    }\n    let {favicon = faviconDefault} = options;\n    const {\n      before = beforeDefault,\n      after = afterDefault,\n      canvas = canvasDefault,\n      image = imageDefault\n    } = options;\n    function addLink () {\n      if (before) {\n        before.before(link);\n      } else if (after) {\n        after.after(link);\n      } else {\n        // eslint-disable-next-line unicorn/prefer-node-append\n        document.head.appendChild(link);\n      }\n    }\n\n    const link = document.createElement('link');\n\n    // eslint-disable-next-line promise/avoid-new\n    return new Promise((resolve, reject) => {\n      let rej = reject;\n      if (acceptErrors) {\n        rej = typeof acceptErrors === 'function'\n          ? (error) => {\n            acceptErrors({\n              error, stylesheetURL, options, resolve, reject\n            });\n          }\n          : resolve;\n      }\n      if (stylesheetURL.endsWith('.css')) {\n        favicon = false;\n      } else if (stylesheetURL.endsWith('.ico')) {\n        favicon = true;\n      }\n      if (favicon) {\n        link.rel = 'shortcut icon';\n        link.type = 'image/x-icon';\n\n        if (image === false) {\n          link.href = stylesheetURL;\n          addLink();\n          resolve(link);\n          return;\n        }\n\n        const cnv = document.createElement('canvas');\n        cnv.width = 16;\n        cnv.height = 16;\n        const context = cnv.getContext('2d');\n        const img = document.createElement('img');\n        img.addEventListener('error', (error) => {\n          reject(error);\n        });\n        img.addEventListener('load', () => {\n          context.drawImage(img, 0, 0);\n          link.href = canvas\n            ? cnv.toDataURL('image/x-icon')\n            : stylesheetURL;\n          addLink();\n          resolve(link);\n        });\n        img.src = stylesheetURL;\n        return;\n      }\n      link.rel = 'stylesheet';\n      link.type = 'text/css';\n      link.href = stylesheetURL;\n      addLink();\n      link.addEventListener('error', (error) => {\n        rej(error);\n      });\n      link.addEventListener('load', () => {\n        resolve(link);\n      });\n    });\n  }\n\n  return Promise.all(\n    stylesheets.map((stylesheetURL) => setupLink(stylesheetURL))\n  );\n}\n"],"names":["stylesheets","beforeDefault","before","afterDefault","after","faviconDefault","favicon","canvasDefault","canvas","image","imageDefault","acceptErrors","Array","isArray","Promise","all","map","stylesheetURL","options","addLink","link","document","head","appendChild","createElement","resolve","reject","rej","error","endsWith","rel","type","href","cnv","width","height","context","getContext","img","addEventListener","drawImage","toDataURL","src","setupLink"],"mappings":"msBAAe,SAA0BA,gEAIrC,GAHMC,IAARC,OAA8BC,IAAPC,MAA8BC,IAATC,QACpCC,IAARC,WAAuBC,MAAOC,gBAC9BC,IAAAA,oBAEAX,EAAcY,MAAMC,QAAQb,GAAeA,EAAc,CAACA,GAuFnDc,QAAQC,IACbf,EAAYgB,KAAI,SAACC,mBAtFCA,OACdC,EAAU,MACVN,MAAMC,QAAQI,GAAgB,SACCA,KAA/BA,kBAAeC,aAAU,WAEIA,EAA5BZ,QAAAA,aAAUD,MAMXa,MAJFhB,OAAAA,aAASD,QACTG,MAAAA,aAAQD,QACRK,OAAAA,aAASD,QACTE,MAAAA,aAAQC,aAEDS,IACHjB,EACFA,EAAOA,OAAOkB,GACLhB,EACTA,EAAMA,MAAMgB,GAGZC,SAASC,KAAKC,YAAYH,OAIxBA,EAAOC,SAASG,cAAc,eAG7B,IAAIV,SAAQ,SAACW,EAASC,OACvBC,EAAMD,KACNf,IACFgB,EAA8B,mBAAjBhB,EACT,SAACiB,GACDjB,EAAa,CACXiB,MAAAA,EAAOX,cAAAA,EAAeC,QAAAA,EAASO,QAAAA,EAASC,OAAAA,KAG1CD,GAEFR,EAAcY,SAAS,QACzBvB,GAAU,EACDW,EAAcY,SAAS,UAChCvB,GAAU,GAERA,EAAS,IACXc,EAAKU,IAAM,gBACXV,EAAKW,KAAO,gBAEE,IAAVtB,SACFW,EAAKY,KAAOf,EACZE,SACAM,EAAQL,OAIJa,EAAMZ,SAASG,cAAc,UACnCS,EAAIC,MAAQ,GACZD,EAAIE,OAAS,OACPC,EAAUH,EAAII,WAAW,MACzBC,EAAMjB,SAASG,cAAc,cACnCc,EAAIC,iBAAiB,SAAS,SAACX,GAC7BF,EAAOE,MAETU,EAAIC,iBAAiB,QAAQ,WAC3BH,EAAQI,UAAUF,EAAK,EAAG,GAC1BlB,EAAKY,KAAOxB,EACRyB,EAAIQ,UAAU,gBACdxB,EACJE,IACAM,EAAQL,WAEVkB,EAAII,IAAMzB,GAGZG,EAAKU,IAAM,aACXV,EAAKW,KAAO,WACZX,EAAKY,KAAOf,EACZE,IACAC,EAAKmB,iBAAiB,SAAS,SAACX,GAC9BD,EAAIC,MAENR,EAAKmB,iBAAiB,QAAQ,WAC5Bd,EAAQL,SAMuBuB,CAAU1B"}