{"version":3,"file":"index-es.min.js","sources":["../src/index.js"],"sourcesContent":["export default function loadStylesheets (stylesheets, {\n    before: beforeDefault, after: afterDefault, favicon: faviconDefault,\n    canvas: canvasDefault, image: imageDefault = true\n} = {}) {\n    stylesheets = Array.isArray(stylesheets) ? stylesheets : [stylesheets];\n\n    function setupLink (stylesheetURL) {\n        let options = {};\n        if (Array.isArray(stylesheetURL)) {\n            ([stylesheetURL, options = {}] = stylesheetURL);\n        }\n        let {favicon = faviconDefault} = options;\n        const {\n            before = beforeDefault,\n            after = afterDefault,\n            canvas = canvasDefault,\n            image = imageDefault\n        } = options;\n        function addLink () {\n            if (before) {\n                before.before(link);\n            } else if (after) {\n                after.after(link);\n            } else {\n                document.head.appendChild(link);\n            }\n        }\n\n        const link = document.createElement('link');\n        return new Promise((resolve, reject) => {\n            if (stylesheetURL.endsWith('.css')) {\n                favicon = false;\n            } else if (stylesheetURL.endsWith('.ico')) {\n                favicon = true;\n            }\n            if (favicon) {\n                link.rel = 'shortcut icon';\n                link.type = 'image/x-icon';\n\n                if (image === false) {\n                    link.href = stylesheetURL;\n                    addLink();\n                    resolve(link);\n                    return;\n                }\n\n                const cnv = document.createElement('canvas');\n                cnv.width = 16;\n                cnv.height = 16;\n                const context = cnv.getContext('2d');\n                const img = document.createElement('img');\n                img.addEventListener('error', (error) => {\n                    reject(error);\n                });\n                img.addEventListener('load', () => {\n                    context.drawImage(img, 0, 0);\n                    link.href = canvas\n                        ? cnv.toDataURL('image/x-icon')\n                        : stylesheetURL;\n                    addLink();\n                    resolve(link);\n                });\n                img.src = stylesheetURL;\n                return;\n            }\n            link.rel = 'stylesheet';\n            link.type = 'text/css';\n            link.href = stylesheetURL;\n            addLink();\n            link.addEventListener('error', (error) => {\n                reject(error);\n            });\n            link.addEventListener('load', () => {\n                resolve(link);\n            });\n        });\n    }\n\n    return Promise.all(\n        stylesheets.map(setupLink)\n    );\n}\n"],"names":["loadStylesheets","stylesheets","beforeDefault","after","afterDefault","favicon","faviconDefault","canvasDefault","image","imageDefault","Array","isArray","Promise","all","map","stylesheetURL","options","before","canvas","addLink","link","head","appendChild","document","createElement","resolve","reject","endsWith","rel","type","href","cnv","width","height","context","getContext","img","addEventListener","error","drawImage","toDataURL","src"],"mappings":"AAAe,SAASA,gBAAiBC,UAC7BC,EAAeC,MAAOC,EAAcC,QAASC,SAC7CC,EAAeC,MAAOC,GAAe,gBAE/BC,MAAMC,QAAQV,GAAeA,GAAeA,GA0EnDW,QAAQC,IACXZ,EAAYa,aAzEIC,OACZC,KACAN,MAAMC,QAAQI,MACZA,EAAeC,MAAgBD,OAEjCV,QAACA,EAAUC,GAAkBU,QAC3BC,SACOf,EADPC,QAEMC,EAFNc,SAGOX,EAHPC,QAIMC,GACRO,WACKG,IACDF,IACOA,OAAOG,GACPjB,IACDA,MAAMiB,YAEHC,KAAKC,YAAYF,SAI5BA,EAAOG,SAASC,cAAc,eAC7B,IAAIZ,QAAQ,CAACa,EAASC,QACrBX,EAAcY,SAAS,WACb,EACHZ,EAAcY,SAAS,aACpB,GAEVtB,EAAS,MACJuB,IAAM,kBACNC,KAAO,gBAEE,IAAVrB,WACKsB,KAAOf,aAEJK,SAINW,EAAMR,SAASC,cAAc,YAC/BQ,MAAQ,KACRC,OAAS,SACPC,EAAUH,EAAII,WAAW,MACzBC,EAAMb,SAASC,cAAc,gBAC/Ba,iBAAiB,QAAUC,MACpBA,OAEPD,iBAAiB,OAAQ,OACjBE,UAAUH,EAAK,EAAG,KACrBN,KAAOZ,EACNa,EAAIS,UAAU,gBACdzB,QAEEK,YAERqB,IAAM1B,KAGTa,IAAM,eACNC,KAAO,aACPC,KAAOf,QAEPsB,iBAAiB,QAAUC,MACrBA,OAEND,iBAAiB,OAAQ,OAClBjB"}