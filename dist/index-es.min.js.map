{"version":3,"file":"index-es.min.js","sources":["../src/index.js"],"sourcesContent":["export default function loadStylesheets (stylesheets, {\n  before: beforeDefault, after: afterDefault, favicon: faviconDefault,\n  canvas: canvasDefault, image: imageDefault = true,\n  acceptErrors\n} = {}) {\n  stylesheets = Array.isArray(stylesheets) ? stylesheets : [stylesheets];\n\n  function setupLink (stylesheetURL) {\n    let options = {};\n    if (Array.isArray(stylesheetURL)) {\n      ([stylesheetURL, options = {}] = stylesheetURL);\n    }\n    let {favicon = faviconDefault} = options;\n    const {\n      before = beforeDefault,\n      after = afterDefault,\n      canvas = canvasDefault,\n      image = imageDefault\n    } = options;\n    function addLink () {\n      if (before) {\n        before.before(link);\n      } else if (after) {\n        after.after(link);\n      } else {\n        document.head.append(link);\n      }\n    }\n\n    const link = document.createElement('link');\n\n    // eslint-disable-next-line promise/avoid-new -- No native option\n    return new Promise((resolve, reject) => {\n      let rej = reject;\n      if (acceptErrors) {\n        rej = typeof acceptErrors === 'function'\n          ? (error) => {\n            acceptErrors({\n              error, stylesheetURL, options, resolve, reject\n            });\n          }\n          : resolve;\n      }\n      if (stylesheetURL.endsWith('.css')) {\n        favicon = false;\n      } else if (stylesheetURL.endsWith('.ico')) {\n        favicon = true;\n      }\n      if (favicon) {\n        link.rel = 'shortcut icon';\n        link.type = 'image/x-icon';\n\n        if (image === false) {\n          link.href = stylesheetURL;\n          addLink();\n          resolve(link);\n          return;\n        }\n\n        const cnv = document.createElement('canvas');\n        cnv.width = 16;\n        cnv.height = 16;\n        const context = cnv.getContext('2d');\n        const img = document.createElement('img');\n        // eslint-disable-next-line promise/prefer-await-to-callbacks -- No API\n        img.addEventListener('error', (error) => {\n          reject(error);\n        });\n        img.addEventListener('load', () => {\n          context.drawImage(img, 0, 0);\n          link.href = canvas\n            ? cnv.toDataURL('image/x-icon')\n            : stylesheetURL;\n          addLink();\n          resolve(link);\n        });\n        img.src = stylesheetURL;\n        return;\n      }\n      link.rel = 'stylesheet';\n      link.type = 'text/css';\n      link.href = stylesheetURL;\n      addLink();\n      // eslint-disable-next-line promise/prefer-await-to-callbacks -- No API\n      link.addEventListener('error', (error) => {\n        rej(error);\n      });\n      link.addEventListener('load', () => {\n        resolve(link);\n      });\n    });\n  }\n\n  return Promise.all(\n    stylesheets.map((stylesheetURL) => setupLink(stylesheetURL))\n  );\n}\n"],"names":["loadStylesheets","stylesheets","_ref","arguments","length","undefined","beforeDefault","before","afterDefault","after","faviconDefault","favicon","canvasDefault","canvas","_ref$image","image","imageDefault","acceptErrors","Array","isArray","Promise","all","map","stylesheetURL","options","_stylesheetURL2","_slicedToArray","_stylesheetURL2$","_options$favicon","_options2","_options2$before","_options2$after","_options2$canvas","_options2$image","addLink","link","document","head","append","createElement","resolve","reject","rej","error","endsWith","rel","type","href","cnv","width","height","context","getContext","img","addEventListener","drawImage","toDataURL","src","setupLink"],"mappings":"+hCAAe,SAASA,EAAiBC,GAIjC,IAAAC,EAAAC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,CAAE,EAHIG,EAAaJ,EAArBK,OAA8BC,EAAYN,EAAnBO,MAA8BC,EAAcR,EAAvBS,QACpCC,EAAaV,EAArBW,OAAMC,EAAAZ,EAAiBa,MAAOC,OAAe,IAAHF,GAAOA,EACjDG,EAAYf,EAAZe,aA0FA,OAxFAhB,EAAciB,MAAMC,QAAQlB,GAAeA,EAAc,CAACA,GAwFnDmB,QAAQC,IACbpB,EAAYqB,KAAI,SAACC,GAAa,OAvFhC,SAAoBA,GAClB,IAAIC,EAAU,CAAA,EACd,GAAIN,MAAMC,QAAQI,GAAgB,CAAA,IACcE,EAAAC,EAAbH,EAAa,GAA5CA,EAAaE,EAAA,GAAA,IAAAE,EAAAF,EAAA,GAAED,OAAO,IAAAG,EAAG,CAAA,EAAEA,CAC/B,CACA,IAAwCC,EAAPJ,EAA5Bb,QAAAA,OAAUD,IAAHkB,EAAGlB,EAAckB,EAC7BC,EAKIL,EAAOM,EAAAD,EAJTtB,OAAAA,OAASD,IAAHwB,EAAGxB,EAAawB,EAAAC,EAAAF,EACtBpB,MAAAA,OAAQD,IAAHuB,EAAGvB,EAAYuB,EAAAC,EAAAH,EACpBhB,OAAAA,OAASD,IAAHoB,EAAGpB,EAAaoB,EAAAC,EAAAJ,EACtBd,MAAAA,OAAQC,IAAHiB,EAAGjB,EAAYiB,EAEtB,SAASC,IACH3B,EACFA,EAAOA,OAAO4B,GACL1B,EACTA,EAAMA,MAAM0B,GAEZC,SAASC,KAAKC,OAAOH,EAEzB,CAEA,IAAMA,EAAOC,SAASG,cAAc,QAGpC,OAAO,IAAInB,SAAQ,SAACoB,EAASC,GAC3B,IAAIC,EAAMD,EAeV,GAdIxB,IACFyB,EAA8B,mBAAjBzB,EACT,SAAC0B,GACD1B,EAAa,CACX0B,MAAAA,EAAOpB,cAAAA,EAAeC,QAAAA,EAASgB,QAAAA,EAASC,OAAAA,GAE3C,EACCD,GAEFjB,EAAcqB,SAAS,QACzBjC,GAAU,EACDY,EAAcqB,SAAS,UAChCjC,GAAU,GAERA,EAAS,CAIX,GAHAwB,EAAKU,IAAM,gBACXV,EAAKW,KAAO,gBAEE,IAAV/B,EAIF,OAHAoB,EAAKY,KAAOxB,EACZW,SACAM,EAAQL,GAIV,IAAMa,EAAMZ,SAASG,cAAc,UACnCS,EAAIC,MAAQ,GACZD,EAAIE,OAAS,GACb,IAAMC,EAAUH,EAAII,WAAW,MACzBC,EAAMjB,SAASG,cAAc,OAcnC,OAZAc,EAAIC,iBAAiB,SAAS,SAACX,GAC7BF,EAAOE,EACT,IACAU,EAAIC,iBAAiB,QAAQ,WAC3BH,EAAQI,UAAUF,EAAK,EAAG,GAC1BlB,EAAKY,KAAOlC,EACRmC,EAAIQ,UAAU,gBACdjC,EACJW,IACAM,EAAQL,EACV,SACAkB,EAAII,IAAMlC,EAEZ,CACAY,EAAKU,IAAM,aACXV,EAAKW,KAAO,WACZX,EAAKY,KAAOxB,EACZW,IAEAC,EAAKmB,iBAAiB,SAAS,SAACX,GAC9BD,EAAIC,EACN,IACAR,EAAKmB,iBAAiB,QAAQ,WAC5Bd,EAAQL,EACV,GACF,GACF,CAGqCuB,CAAUnC,EAAc,IAE/D"}