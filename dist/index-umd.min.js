!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Loader={})}(this,function(e){"use strict";function t({before:e,after:t,element:r,listen:o,remove:n,acceptErrors:s,stylesheetURL:a}){let c;return o&&(c=new Promise((e,t)=>{s&&(t="function"==typeof s?r=>{s({error:r,resolve:e,reject:t,stylesheetURL:a})}:e);const o=()=>{r.removeEventListener("error",c),r.removeEventListener("load",i),n&&r.remove()},c=e=>{t(e),o()},i=()=>{e(r),o()};r.addEventListener("error",c),r.addEventListener("load",i)})),e?e.before(r):t?t.after(r):document.head.append(r),c}const r=function(e,{before:r=null,after:o=null,remove:n=!1,favicon:s=!1,canvas:a=!1,image:c=!0,acceptErrors:i=!1}={}){return e=Array.isArray(e)?e:[e],Promise.all(e.map(function(e){let l={};Array.isArray(e)?[e,l={}]=e:e&&"object"==typeof e&&({stylesheetURL:e=e.stylesheet,options:l={}}=e);let{favicon:f=s}=l;const{before:m=r,after:u=o,remove:d=n,canvas:p=a,image:v=c,acceptErrors:y=i}=l,h=document.createElement("link");return e.endsWith(".css")?f=!1:e.endsWith(".ico")&&(f=!0),f?(h.rel="shortcut icon",h.type="image/x-icon",new Promise((r,o)=>{if(y&&(o="function"==typeof y?t=>{y({error:t,stylesheetURL:e,options:l,resolve:r,reject:o})}:r),!1===v)return h.href=e,t({before:m,after:u,remove:d,element:h}),void r(h);const n=document.createElement("canvas");n.width=16,n.height=16;const s=n.getContext("2d"),a=document.createElement("img");a.addEventListener("error",e=>{o(e)}),a.addEventListener("load",()=>{s.drawImage(a,0,0),h.href=p?n.toDataURL("image/x-icon"):e,t({before:m,after:u,remove:d,element:h}),r(h)}),a.src=e})):(h.rel="stylesheet",h.type="text/css",h.href=e,t({before:m,after:u,remove:d,element:h,acceptErrors:y,listen:!0,stylesheetURL:e}))}))};e.loadResources=async function(e,{autoDetectType:o=!1,before:n=null,after:s=null,remove:a=!1,favicon:c=!1,canvas:i=!1,image:l=!0,acceptErrors:f=!1,link:m=!1}={}){e=Array.isArray(e)?e:[e];const u=await Promise.all(e.map(async e=>{let t={};if(Array.isArray(e))[e,t={}]=e;else if(e&&"object"==typeof e){if(e.then)return e;({url:e,options:t={}}=e)}const{before:u=n,after:d=s,remove:p=a,canvas:v=i,image:y=l,acceptErrors:h=f,favicon:E=c,link:b=m,autoDetectType:L=o}=t;if(E||b)return{results:r(e,{before:u,after:d,remove:p,favicon:E,canvas:v,image:y,acceptErrors:h})};const g=await fetch(e);return Promise.all([L?g.clone().text():g.text(),L?g.blob().then(e=>e.type.includes("text/css")):e.endsWith(".css"),u,d,p,h])}));return Promise.all(u.map(e=>{if(!Array.isArray(e))return e.results?e.results.then(e=>e[0]):e;const[r,o,n,s,a,c]=e,i=o?"style":"script",l=document.createElement(i);return l.append(r),t({before:n,after:s,remove:a,element:l,listen:!0,acceptErrors:c})}))},e.loadExternals=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index-umd.min.js.map
